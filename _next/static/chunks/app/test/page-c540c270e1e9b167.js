(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{1782:(e,s,r)=>{Promise.resolve().then(r.bind(r,2365))},2365:(e,s,r)=>{"use strict";r.d(s,{default:()=>d});var a=r(7437),i=r(5079),l=r(6920),t=r(2265);let n={userName:"user-name",avatar:"https://i.pinimg.com/736x/1d/aa/ed/1daaedf28727c2403a01d1fbb7dfac4c.jpg"},c=e=>{let{comment:s,onLike:r,onReplySubmit:d,formatDate:m}=e,[o,x]=(0,t.useState)(""),[u,p]=(0,t.useState)(!1);return(0,a.jsxs)("div",{className:"flex flex-col pt-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("img",{src:s.avatar,alt:"".concat(s.userName,"'s avatar"),className:"object-cover w-12 h-12 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h4",{className:"text-secondry font-bold",children:s.userName}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:m(s.dateTime)})]}),(0,a.jsx)("p",{className:"mt-1",children:s.content}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsx)("button",{onClick:()=>r(s.id,!0),className:"hover:underline font-medium text-blue-500",children:(0,a.jsx)(l.G,{icon:i.u8Q,className:"size-4"})}),(0,a.jsx)("p",{children:s.like}),(0,a.jsx)("button",{onClick:()=>r(s.id,!1),className:"hover:underline font-medium text-red-500",children:(0,a.jsx)(l.G,{icon:i.bam,className:"size-4"})}),(0,a.jsx)("button",{onClick:()=>{p(e=>!e),u&&x("")},className:"hover:underline font-medium text-gray-500",children:u?"Cancel":"Reply"})]})]})]}),u&&(0,a.jsxs)("div",{className:"mt-4 ml-12 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("img",{src:n.avatar,alt:"".concat(n.userName,"'s avatar"),className:"object-cover w-12 h-12 rounded-full"}),(0,a.jsx)("textarea",{value:o,onChange:e=>x(e.target.value),className:"w-full h-[100px] p-2 border border-gray-300 rounded-md focus:outline-none bg-white focus:ring-2 focus:ring-blue-500",placeholder:"Reply to ".concat(s.userName,"...")})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>{d(s.id,o),x(""),p(!1)},className:"bg-secondry hover:bg-secondry/80 px-4 py-2 text-white rounded-md",children:"Đăng b\xecnh luận"})})]}),(0,a.jsx)("div",{className:"mt-4 ml-12 space-y-4",children:s.replies.map(e=>(0,a.jsx)(c,{comment:e,onLike:(e,a)=>r(e,a,!0,s.id),onReplySubmit:(r,a)=>d(s.id,a,r||e.id),formatDate:m},e.id))})]})},d=e=>{let{comments:s}=e,[r,d]=(0,t.useState)([...s]),[m,o]=(0,t.useState)(""),x=e=>new Date(e).toLocaleString("en-US",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),u=function(e,s){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;d(i=>i.map(i=>i.id!==e||r?r&&a?{...i,replies:p(i.replies,e,s)}:i:{...i,like:i.like+(s?1:-1)}))},p=(e,s,r)=>e.map(e=>e.id===s?{...e,like:e.like+(r?1:-1)}:{...e,replies:p(e.replies,s,r)}),h=(e,s,a)=>{var i;if(!s.trim())return;let l={id:Date.now(),dateTime:new Date,userName:n.userName,avatar:n.avatar,content:s.trim(),like:0,replies:[],replyTo:a?null===(i=b(r,e,a))||void 0===i?void 0:i.userName:void 0};d(s=>s.map(s=>s.id===e?a?{...s,replies:N(s.replies,a,l)}:{...s,replies:[...s.replies,l]}:s))},b=(e,s,r)=>{let a=e.find(e=>e.id===s);if(!a)return;let i=(e,s)=>{for(let r of e){if(r.id===s)return r;let e=i(r.replies,s);if(e)return e}};return i(a.replies,r)},f=e=>{let s=e.length;return e.forEach(e=>{s+=f(e.replies)}),s},N=(e,s,r)=>e.map(e=>e.id===s?{...e,replies:[...e.replies,r]}:{...e,replies:N(e.replies,s,r)});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-7",children:[(0,a.jsxs)("div",{className:"flex items-center py-2 border-b border-gray-500",children:[(0,a.jsxs)("p",{className:"border-primary px-1 border-r-2",children:["Bạn đ\xe3 đăng nhập -"," ",(0,a.jsx)("a",{href:"#",className:"text-primary",children:n.userName})]}),(0,a.jsx)("a",{href:"#",className:"text-primary px-1",children:"Đăng xuất"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("img",{src:n.avatar,alt:"".concat(n.userName,"'s avatar"),className:"object-cover w-12 h-12 rounded-full"}),(0,a.jsx)("textarea",{className:"w-full h-[100px] p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",placeholder:"Write a new comment...",value:m,onChange:e=>o(e.target.value)})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{className:"bg-secondry hover:bg-secondry/80 px-4 py-2 mt-2 text-white rounded-md",onClick:()=>{m.trim()&&(d([{id:Date.now(),dateTime:new Date,userName:n.userName,avatar:n.avatar,content:m.trim(),like:0,replies:[]},...r]),o(""))},children:"Đăng b\xecnh luận"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:" flex items-center justify-between border-b-2 border-gray-300",children:[(0,a.jsxs)("h3",{className:"uppercase font-semibold py-1.5 border-b-2 border-secondry w-fit -mb-0.5",children:[(e=>{let s=e.length;return e.forEach(e=>{s+=f(e.replies)}),s})(s)," B\xecnh luận"]}),(0,a.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,a.jsx)("div",{className:"px-2.5 py-1.5 border-b-2 border-[#ffa600] -mb-0.5",children:(0,a.jsx)(l.G,{icon:i.BDt,className:"size-4"})}),(0,a.jsx)("div",{className:"px-2.5 py-1.5 border-b-2 border-[#fc5844] -mb-0.5",children:(0,a.jsx)(l.G,{icon:i.Rpv,className:"size-4"})}),(0,a.jsxs)("div",{className:"flex items-center px-2.5 py-1.5 border-b-2 border-primary -mb-0.5",children:[(0,a.jsx)("p",{children:"Mới nhất"}),(0,a.jsx)(l.G,{icon:i.eW2,className:"size-5"})]})]})]}),r.map(e=>(0,a.jsx)(c,{comment:e,onLike:u,onReplySubmit:h,formatDate:x},e.id))]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[676,920,130,215,744],()=>s(1782)),_N_E=e.O()}]);